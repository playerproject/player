###########################################################################
# Desc: Makefile for Player Viewer
# Author: Andrew Howard
# Date: May 14 2002
# CVS: $Id$
###########################################################################

include ../../Makefile.common

.SUFFIXES: .c .o

###########################################################################
# Options
###########################################################################

EXE = playerv
OBS = playerv.o mainwnd.o imagewnd.o opt.o \
			dev_laser.o dev_lbd.o dev_position.o \
			dev_ptz.o dev_vision.o 

INCLUDES = -I../../client_libs/libplayerc -I../../include
CFLAGS = -g3 -Wall $(INCLUDES) -DPLAYER_VERSION=\"$(PLAYER_VERSION)\"
LFLAGS = -lm -L../../client_libs/libplayerc -lplayerc

RTK = rtk2
INCLUDES += -I$(RTK)
CFLAGS += -DINCLUDE_GUI -I$(RTK) `gtk-config --cflags`
LFLAGS += -L$(RTK) `gtk-config --libs gtk gthread` -lrtk


###########################################################################
# Build section
###########################################################################

all: $(EXE)

$(EXE) : $(OBS) librtk.a
	$(CC) $(OBS) $(LFLAGS) -o $(EXE)

librtk.a :
	cd rtk2; make

%.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

install: all
	$(MKDIR) -p $(INSTALL_UTILS)/playerv
	$(INSTALL) playerv $(INSTALL_UTILS)/playerv

uninstall:
	$(RM) -f $(INSTALL_UTILS)/playerv/playerv
	$(RMDIR) --ignore-fail-on-non-empty $(INSTALL_UTILS)/playerv
	$(RMDIR) --ignore-fail-on-non-empty $(INSTALL_UTILS)

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null
	$(RM) -f Makefile.bak
	cd $(RTK) && make dep

clean_dep:
	$(MAKEDEP) -s "# Dependancies (generated by 'make dep')" 
	$(RM) -f Makefile.bak
	cd $(RTK) && make clean_dep

clean: clean_dep
	rm -f $(EXE) *~ *.o core
	cd $(RTK) && make clean




###########################################################################
# Install (to do)
###########################################################################



# Dependancies (generated by 'make dep')

dev_laser.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_laser.o: ../../include/player.h ../../include/messages.h
dev_laser.o: ../../include/playercommon.h ../../include/defaults.h error.h
dev_laser.o: opt.h
dev_lbd.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_lbd.o: ../../include/player.h ../../include/messages.h
dev_lbd.o: ../../include/playercommon.h ../../include/defaults.h error.h
dev_lbd.o: opt.h
dev_position.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_position.o: ../../include/player.h ../../include/messages.h
dev_position.o: ../../include/playercommon.h ../../include/defaults.h error.h
dev_position.o: opt.h
dev_ptz.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_ptz.o: ../../include/player.h ../../include/messages.h
dev_ptz.o: ../../include/playercommon.h ../../include/defaults.h error.h
dev_ptz.o: opt.h
dev_vision.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_vision.o: ../../include/player.h ../../include/messages.h
dev_vision.o: ../../include/playercommon.h ../../include/defaults.h error.h
dev_vision.o: opt.h
imagewnd.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
imagewnd.o: ../../include/player.h ../../include/messages.h
imagewnd.o: ../../include/playercommon.h ../../include/defaults.h error.h
imagewnd.o: opt.h
mainwnd.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
mainwnd.o: ../../include/player.h ../../include/messages.h
mainwnd.o: ../../include/playercommon.h ../../include/defaults.h error.h
mainwnd.o: opt.h
opt.o: error.h opt.h
playerv.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
playerv.o: ../../include/player.h ../../include/messages.h
playerv.o: ../../include/playercommon.h ../../include/defaults.h error.h
playerv.o: opt.h

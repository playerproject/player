###########################################################################
# Desc: Makefile for Player Viewer
# Author: Andrew Howard
# Date: May 14 2002
# CVS: $Id$
###########################################################################

include ../../Makefile.common

.SUFFIXES: .c .o

###########################################################################
# Options
###########################################################################

EXE = playerv
OBS = playerv.o mainwnd.o opt.o \
			dev_position.o dev_laser.o dev_laserbeacon.o

INCLUDES = -I../../client_libs/libplayerc -I../../include
CFLAGS = -g3 -Wall $(INCLUDES) -DPLAYER_VERSION=\"$(PLAYER_VERSION)\"
LFLAGS = -lm -L../../client_libs/libplayerc -lplayerc

RTK = rtk2
INCLUDES += -I$(RTK)
CFLAGS += -DINCLUDE_GUI -I$(RTK) `gtk-config --cflags`
LFLAGS += -L$(RTK) `gtk-config --libs gtk gthread` -lrtk


###########################################################################
# Build section
###########################################################################

all: $(EXE)

$(EXE) : $(OBS) librtk.a
	$(CC) $(OBS) $(LFLAGS) -o $(EXE)

librtk.a :
	cd rtk2; make

%.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null
	$(RM) -f Makefile.bak

clean:
	rm -f $(EXE) *~ *.o core




###########################################################################
# Install (to do)
###########################################################################



# Dependancies (generated by 'make dep')

dev_laserbeacon.o: playerv.h rtk2/rtk.h
dev_laserbeacon.o: ../../client_libs/libplayerc/playerc.h
dev_laserbeacon.o: ../../include/messages.h ../../include/playercommon.h
dev_laserbeacon.o: ../../include/defaults.h error.h opt.h
dev_laser.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_laser.o: ../../include/messages.h ../../include/playercommon.h
dev_laser.o: ../../include/defaults.h error.h opt.h
dev_position.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
dev_position.o: ../../include/messages.h ../../include/playercommon.h
dev_position.o: ../../include/defaults.h error.h opt.h
mainwnd.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
mainwnd.o: ../../include/messages.h ../../include/playercommon.h
mainwnd.o: ../../include/defaults.h error.h opt.h
opt.o: error.h opt.h
playerv.o: playerv.h rtk2/rtk.h ../../client_libs/libplayerc/playerc.h
playerv.o: ../../include/messages.h ../../include/playercommon.h
playerv.o: ../../include/defaults.h error.h opt.h

###########################################################################
# Desc: Makefile for Player Viewer
# Author: Andrew Howard
# Date: May 14 2002
# CVS: $Id$
###########################################################################

include ../../Makefile.common

.SUFFIXES: .c .o

###########################################################################
# Options
###########################################################################

EXE = playerv
OBS = playerv.o mainwnd.o opt.o \
			dev_position.o dev_laser.o dev_laserbeacon.o

INCLUDES = -I../../client_libs/libplayerc -I../../include
CFLAGS = -g3 -Wall $(INCLUDES) -DPLAYER_VERSION=\"$(PLAYER_VERSION)\"
LFLAGS = -lm -L../../client_libs/libplayerc -lplayerc

RTK = rtk2
INCLUDES += -I$(RTK)
CFLAGS += -DINCLUDE_GUI -I$(RTK) `gtk-config --cflags`
LFLAGS += -L$(RTK) `gtk-config --libs gtk gthread` -lrtk


###########################################################################
# Build section
###########################################################################

all: $(EXE)

$(EXE) : $(OBS) librtk.a
	$(CC) $(OBS) $(LFLAGS) -o $(EXE)

librtk.a :
	cd rtk2; make

%.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null
	$(RM) -f Makefile.bak
	cd $(RTK) && make dep

clean_dep:
	$(MAKEDEP) -s "# Dependancies (generated by 'make dep')" 
	$(RM) -f Makefile.bak
	cd $(RTK) && make clean_dep

clean: clean_dep
	rm -f $(EXE) *~ *.o core
	cd $(RTK) && make clean




###########################################################################
# Install (to do)
###########################################################################



# Dependancies (generated by 'make dep')

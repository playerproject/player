# B21r player config file using rflex drivers
# Includes Sick LMS 200 laser scanner and wifi
# Laser scanner custom installed (may vary from rwi installed scanner config)
# Toby Collett - 2004-02-11
# University of Auckland


driver
(
  name "rflex" 
  provides ["position2d:1" "bumper:0" "sonar:0" "bank2:::sonar:1" "power:0" "ir:0"]

	rflex_serial_port 		"/dev/ttyR0" 
	m_length 			0.5
	m_width 			0.5 
	odo_distance_conversion 	103000
	odo_angle_conversion 		35000
	default_trans_acceleration 	0.5
	default_rot_acceleration 	0.017
	rflex_joystick			1
	rflex_joy_pos_ratio		6
	rflex_joy_ang_ratio		-0.01
	rflex_heading_home_address	49	#0x31
	rflex_home_on_start		1	

	bumper_count		14
	bumper_def [-0.216506 0.125000 -3.665191 0.261799 0.250000 0.000000 0.250000 -4.712389 0.261799 0.250000 0.216506 0.125000 -5.759586 0.261799 0.250000 0.216506 -0.125000 -6.806784 0.261799 0.250000 0.000000 -0.250000 -7.853981 0.261799 0.250000 -0.216506 -0.125000 -8.901179 0.261799 0.250000 -0.240209 0.099498 -3.534292 0.204204 0.260000 -0.099498 0.240209 -4.319690 0.204204 0.260000 0.099498 0.240209 -5.105088 0.204204 0.260000 0.240209 0.099498 -5.890486 0.204204 0.260000 0.240209 -0.099498 -6.675884 0.204204 0.260000 0.099498 -0.240209 -7.461283 0.204204 0.260000 -0.099498 -0.240209 -8.246680 0.204204 0.260000 -0.240209 -0.099498 -9.032079 0.204204 0.260000 ]
	rflex_bumper_address	64 # 0x40

	range_distance_conversion 	1476
	sonar_age 			1
	sonar_echo_delay		30000
	sonar_ping_delay		0
	sonar_set_delay			0
	sonar_max_range			3000
	max_num_sonars 			224
	num_sonars 				48
	num_sonar_banks 		14
	num_sonars_possible_per_bank	16
	num_sonars_in_bank 		[4 4 4 4 4 4 3 3 3 3 3 3 3 3]
	# theta (rads), x, y (m) in robot coordinates (x is forward)
	mrad_sonar_poses 	[     3.01069  -0.24786122    0.03263155     2.74889  -0.23096988    0.09567086     2.48709  -0.19833834   0.15219036     2.22529  -0.15219036   0.19833834     1.96350   -0.09567086   0.23096988     1.70170   -0.03263155   0.24786122     1.43990    0.03263155   0.24786122     1.17810    0.09567086   0.23096988     0.91630   0.15219036   0.19833834     0.65450   0.19833834   0.15219036     0.39270   0.23096988    0.09567086     0.13090   0.24786122    0.03263155    -0.13090   0.24786122   -0.03263155    -0.39270   0.23096988   -0.09567086    -0.65450   0.19833834  -0.15219036    -0.91630   0.15219036  -0.19833834    -1.17810    0.09567086  -0.23096988    -1.43990    0.03263155  -0.24786122    -1.70170   -0.03263155  -0.24786122    -1.96350   -0.09567086  -0.23096988    -2.22529  -0.15219036  -0.19833834    -2.48709  -0.19833834  -0.15219036    -2.74889  -0.23096988   -0.09567086    -3.01069  -0.24786122   -0.03263155       4.18879  -0.13000000  -0.22516660     3.92699  -0.18384776  -0.18384776     3.66519  -0.22516660  -0.13000000     3.40339  -0.25114071   -0.06729295     3.14159  -0.26000000     0.00000     2.87979  -0.25114071    0.06729295     2.61799  -0.22516660   0.13000000     2.35619  -0.18384776   0.18384776     2.09440  -0.13000000   0.22516660     1.83260   -0.06729295   0.25114071     1.57080     0.00000   0.26000000     1.30900    0.06729295   0.25114071     1.04720   0.13000000   0.22516660     0.78540   0.18384776   0.18384776     0.52360   0.22516660   0.13000000     0.26180   0.25114071    0.06729295     0.00000   0.26000000     0.00000    -0.26180   0.25114071   -0.06729295    -0.52360   0.22516660  -0.13000000    -0.78540   0.18384776  -0.18384776    -1.04720   0.13000000  -0.22516660    -1.30900    0.06729295  -0.25114071    -1.57080     0.00000  -0.26000000    -1.83260   -0.06729295  -0.25114071    -2.09440  -0.13000000  -0.22516660    -2.35619  -0.18384776  -0.18384776]
	sonar_2nd_bank_start	24
	

	rflex_power_offset		1.2 # volts

	rflex_base_bank 0
	rflex_bank_count 6
	rflex_banks	[4 4 4 4 4 4]
	pose_count	24
	ir_min_range	0.100
	ir_max_range	0.800
	rflex_ir_calib	[ 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 4000 -2 ]
	poses [-0.247861 0.032632 -3.272492 -0.230970 0.095671 -3.534292 -0.198338 0.152190 -3.796091 -0.152190 0.198338 -4.057890 -0.095671 0.230970 -4.319690 -0.032632 0.247861 -4.581489 0.032632 0.247861 -4.843289 0.095671 0.230970 -5.105088 0.152190 0.198338 -5.366888 0.198338 0.152190 -5.628687 0.230970 0.095671 -5.890486 0.247861 0.032632 -6.152286 0.247861 -0.032632 -6.414085 0.230970 -0.095671 -6.675884 0.198338 -0.152190 -6.937684 0.152190 -0.198338 -7.199483 0.095671 -0.230970 -7.461283 0.032632 -0.247861 -7.723082 -0.032632 -0.247861 -7.984881 -0.095671 -0.230970 -8.246680 -0.152190 -0.198338 -8.508480 -0.198338 -0.152190 -8.770280 -0.230970 -0.095671 -9.032079 -0.247861 -0.032631 -9.293879 ]
)



driver
(
  name "sicklms200"
  provides ["laser:0"]
  port "/dev/ttyR2"
  delay				0
  pose				[0.15 0 0]
  resolution			50
  range_res			1
  invert				0
)

#driver
#(
#  name "linuxwifi"
#  provides ["wifi:0"]
#)

#driver
#(
#  name "ptu46"
#  provides ["ptz:0"]
#  port	"/dev/ttyR1" 
#)


#driver
#(
#  name "festival"
#  provides ["speech:0"]
#  libdir		"/usr/share/festival/" 
#)

#driver
#(
#  name "bumper_safe"
#  provides ["position2d:0"]
#  requires ["position2d:1" "bumper:0"]
#  alwayson				1
#)


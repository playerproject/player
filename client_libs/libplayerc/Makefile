###########################################################################
# Desc: Make file for the C client lib
# Author: Andrew Howard
# Date: 13 May 2002
# CVS: $Id$
###########################################################################

include ../../Makefile.common

.SUFFIXES: .c .o

LIB = libplayerc.a
OBS = mclient.o client.o device.o error.o \
			dev_bps.o dev_broadcast.o dev_gps.o \
		  dev_laser.o dev_lbd.o dev_position.o \
			dev_ptz.o dev_sonar.o dev_vision.o

INCLUDES = -I. -I../../include
CFLAGS = -g3 -Wall $(INCLUDES)
PWD = $(shell pwd)

###########################################################################
# Build section

all: $(LIB)

$(LIB) : $(OBS)
	ar r $(LIB) $(OBS)
	ln -fs $(PWD)/playerc.h ../../include
	ln -fs $(PWD)/$(LIB) ../../lib

%.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

install: $(LIB)
	$(MKDIR) -p $(INSTALL_LIB)
	$(INSTALL) -m 644 $(LIB) $(INSTALL_LIB)
	$(MKDIR) -p $(INSTALL_INCLUDE)
	$(INSTALL) -m 644 playerc.h $(INSTALL_INCLUDE)

uninstall:
	$(RM) -f $(INSTALL_LIB)/$(LIB)
	$(RM) -f $(INSTALL_INCLUDE)/playerc.h

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null
	$(RM) -f Makefile.bak
	cd test && make dep

clean_dep:
	$(MAKEDEP) -s "# Dependancies (generated by 'make dep')"
	$(RM) -f Makefile.bak
	cd test && make clean_dep

clean: clean_dep
	rm -f *~ *.o *.a ../../lib/libplayerc.a
	cd test && make clean


# Dependancies (generated by 'make dep')

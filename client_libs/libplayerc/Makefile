###########################################################################
# Desc: Make file for the C client lib
# Author: Andrew Howard
# Date: 13 May 2002
###########################################################################

include ../../Makefile.common

.SUFFIXES: .c .o

LIB = libplayerc.a
OBS = mclient.o client.o device.o error.o \
			dev_position.o dev_laser.o dev_laserbeacon.o dev_broadcast.o \
			dev_vision.o

TEST = test
TEST_OBS = test.o test_position.o
TEST_LFLAGS = -L. -lplayerc -lm

INCLUDES = -I. -I../../include
CFLAGS = -g3 -Wall $(INCLUDES)


###########################################################################
# Build section

all: $(LIB)

$(LIB) : $(OBS)
	ar r $(LIB) $(OBS)

$(TEST) : $(TEST_OBS) $(LIB)
	$(CC) $(TEST_OBS) $(TEST_LFLAGS) -o $(TEST)

%.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

dep:
	$(MAKEDEP) $(INCLUDES) -Y -s "# Dependancies (generated by 'make dep')" *.c 2>/dev/null

clean:
	rm -f *~ *.o *.a


# Dependancies (generated by 'make dep')

client.o: playerc.h ../../include/messages.h ../../include/playercommon.h
client.o: ../../include/defaults.h error.h
device.o: playerc.h ../../include/messages.h ../../include/playercommon.h
device.o: ../../include/defaults.h error.h
dev_laserbeacon.o: playerc.h ../../include/messages.h
dev_laserbeacon.o: ../../include/playercommon.h ../../include/defaults.h
dev_laserbeacon.o: error.h
dev_laser.o: playerc.h ../../include/messages.h ../../include/playercommon.h
dev_laser.o: ../../include/defaults.h error.h
dev_position.o: playerc.h ../../include/messages.h
dev_position.o: ../../include/playercommon.h ../../include/defaults.h error.h
error.o: playerc.h ../../include/messages.h ../../include/playercommon.h
error.o: ../../include/defaults.h error.h
mclient.o: playerc.h ../../include/messages.h ../../include/playercommon.h
mclient.o: ../../include/defaults.h error.h
playerc.o: playerc.h ../../include/messages.h ../../include/playercommon.h
playerc.o: ../../include/defaults.h
test.o: playerc.h ../../include/messages.h ../../include/playercommon.h
test.o: ../../include/defaults.h
